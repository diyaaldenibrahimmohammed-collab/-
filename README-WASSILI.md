# دليل تشغيل بوت OTP التلقائي لموقع Wassili.site

لقد تم تعديل البوت ليعمل بشكل **تلقائي بالكامل**. يقوم البوت بمراقبة قاعدة البيانات (MongoDB) وإرسال الـ OTP فور طلبه من الموقع.

## آلية العمل الجديدة:
1. يقوم موقعك (Wassili.site) بتوليد رمز OTP وحفظه في جدول/مجموعة الـ `users` في حقل `otp`.
2. يجب أن يتأكد الموقع من أن الحقل `otp_sent` قيمته `false` أو غير موجود عند طلب OTP جديد.
3. البوت يقوم بفحص قاعدة البيانات كل 5 ثوانٍ.
4. بمجرد عثور البوت على مستخدم لديه `otp` ولم يتم إرساله، يقوم بإرسال الرسالة عبر WhatsApp.
5. بعد الإرسال، يقوم البوت بتحديث الحقل `otp_sent` إلى `true` لكي لا يرسله مرة أخرى.

## الإعدادات المطلوبة في ملف `.env`:
تأكد من ربط البوت بنفس قاعدة بيانات الموقع:
```env
MONGODB_URI=mongodb+srv://... (رابط قاعدة بيانات موقعك)
DB_NAME=wassili-db (اسم قاعدة البيانات)
OTP_MESSAGE_TEMPLATE=رمز التحقق الخاص بك في وصل-لي هو: {OTP}
```

## كيفية التشغيل:
1. قم بتثبيت المكتبات: `npm install`.
2. شغل البوت: `node index-otp-only.js`.
3. افتح الرابط `http://your-server-ip:3000/qr` وامسح الرمز بالرقم الذي تريد استخدامه للإرسال.

## المميزات:
- **رقم واحد فقط**: يعمل البوت برقم واحد لتقليل استهلاك الموارد وتجنب الحظر.
- **تلقائي**: لا يحتاج موقعك لإرسال طلبات API للبوت، فقط يحتاج لتحديث قاعدة البيانات.
- **إزالة الإشعارات**: تم تنظيف الكود من كافة الإشعارات والاشتراكات لضمان التركيز على سرعة إرسال الـ OTP.
